async function generateZip() {
        const selected = Array.from(document.querySelectorAll('#form-list input:checked'));
        if (selected.length === 0) return alert("Select at least one form!");

        const status = document.getElementById('status');
        const zip = new JSZip();
        status.innerText = "‚è≥ Starting process...";

        try {
            let filesAdded = 0;

            for (let item of selected) {
                const fileName = item.value;
                status.innerText = `‚úçÔ∏è Filling: ${fileName}`;
                
                // Fetch the file
                const response = await fetch(`./forms/${fileName}`);
                
                // CHECK: If the file doesn't exist on GitHub, stop and alert
                if (!response.ok) {
                    throw new Error(`File not found: ${fileName}. Check that it's in the /forms/ folder on GitHub.`);
                }
                
                const bytes = await response.arrayBuffer();
                const pdfDoc = await PDFLib.PDFDocument.load(bytes);
                const form = pdfDoc.getForm();

                // Form Data Logic
                const dobVal = document.getElementById('dob').value;
                let dD="", dM="", dY=""; 
                if(dobVal){ 
                    const [year, month, day] = dobVal.split('-');
                    dD = day; dM = month; dY = year;
                }

                const tfn = document.getElementById('tfn').value.replace(/\s/g,'');
                const t1=tfn.substring(0,3), t2=tfn.substring(3,6), t3=tfn.substring(6,9);

                const data = {
                    'Given names': document.getElementById('given_names').value,
                    'Family name': document.getElementById('family_name').value,
                    'Member number': document.getElementById('member_no').value,
                    'Date of birth day': dD, 'Date of birth month': dM, 'Date of birth year': dY,
                    'TFN1': t1, 'TFN2': t2, 'TFN3': t3,
                    'Residential address (compulsory)': document.getElementById('address').value,
                    'Suburb/town': document.getElementById('suburb').value,
                    'State': document.getElementById('state').value,
                    'Postcode': document.getElementById('postcode').value,
                    'Telephone mobile': document.getElementById('mobile').value
                };

                // Fill fields if they exist
                Object.keys(data).forEach(key => {
                    try { 
                        const field = form.getTextField(key);
                        if (field) field.setText(data[key]); 
                    } catch(e) {}
                });

                const savedBytes = await pdfDoc.save();
                zip.file(`Filled_${fileName}`, savedBytes);
                filesAdded++;
            }

            if (filesAdded === 0) {
                throw new Error("No files were successfully processed.");
            }

            status.innerText = "üì¶ Creating ZIP file...";
            const content = await zip.generateAsync({type:"blob"});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(content);
            const lName = document.getElementById('family_name').value || "Cbus";
            link.download = `${lName}_Forms.zip`;
            link.click();
            
            status.innerText = "‚úÖ Done! Check your Downloads.";
        } catch (err) {
            console.error(err);
            status.innerText = "‚ùå Error: " + err.message;
            alert("Processing Error: " + err.message);
        }
    }